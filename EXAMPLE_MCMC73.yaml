#timing: True
debug: False
stop_at_error: False

likelihood:
  lsst_y1.multi_gaussian:
    #input_params_prefix: gaussian_ # if this option present, only param with prefix_ enters this likelihood
    means: [ 
              #fiducial
              [3.045, 0.9649, 67.32, 0.0493382322, 0.3166, 0.3166, #cosmo
              0.0414632, 0.00147332, 0.0237035,-0.0773436,-8.67127e-05, #dz_source
              0.606102, -1.51541], #IA
            ]
    covs_file: './projects/lsst_y1/EXAMPLE_MCMC56.covmat'
    covs_dim: 13
    random_rotation: False
  one: Null

params:
  logA:
    prior:
      min: 2.84
      max: 3.21
    latex: \log(10^{10} A_\mathrm{s})
  ns:
    prior:
      min: 0.92
      max: 1.00
    latex: n_\mathrm{s}
  H0:
    prior:
      min: 61
      max: 73
    latex: H_0
  omegab:
    prior:
      min: 0.04
      max: 0.06
    latex: \Omega_\mathrm{b}
  omegam:
    prior:
      min: 0.24
      max: 0.4
    latex: \Omega_\mathrm{m}
  omegam_growth:
    prior:
      min: 0.24
      max: 0.4
    latex: \Omega_\mathrm{m}^\mathrm{growth}
    #nuissance
  LSST_DZ_S1:
    prior:
      min: -0.16
      max:  0.16
    latex: \Delta z_\mathrm{s,LSST}^1
  LSST_DZ_S2:
    prior:
      min: -0.008
      max:  0.008
    latex: \Delta z_\mathrm{s,LSST}^2
  LSST_DZ_S3:
    prior:
      min: -0.08
      max:  0.08
    latex: \Delta z_\mathrm{s,LSST}^3
  LSST_DZ_S4:
    prior:
      min: -0.28
      max:  0.28
    latex: \Delta z_\mathrm{s,LSST}^4
  LSST_DZ_S5:
    prior:
      min: -0.008
      max:  0.008
    latex: \Delta z_\mathrm{s,LSST}^5
  LSST_A1_1:
    prior:
      min: -5
      max:  5
    latex: A_\mathrm{1-IA,LSST}^1
  LSST_A1_2:
    prior:
      min: -5
      max:  5
    latex: A_\mathrm{1-IA,LSST}^2

sampler:
  mcmc:
    # ---------------------------------------------------------------------
    # File (w/ path) or matrix defining a covariance matrix for the proposal:
    # - null (default): will be generated from params info (prior and proposal)
    # - matrix: remember to set `covmat_params` to the parameters in the matrix
    #covmat: "./projects/lsst_y1/EXAMPLE_MCMC3.covmat"
    covmat_params:
    # --------------------------------------
    # --------------------------------------
    # Proposal covariance matrix learning
    # --------------------------------------
    # --------------------------------------
    learn_proposal: True
    # Don't learn if convergence better than...
    learn_proposal_Rminus1_min: 0.03
    # (even earlier if a param is not in the given covariance matrix)
    learn_proposal_Rminus1_max_early: 2000.
    # --------------------------------------
    # --------------------------------------
    # Convergence and stopping
    # --------------------------------------
    # --------------------------------------
    # Maximum number of posterior evaluations
    max_samples: .inf
    # Gelman-Rubin R-1 on means
    Rminus1_stop: 0.02
    # Gelman-Rubin R-1 on std deviations
    Rminus1_cl_stop: 0.1
    Rminus1_cl_level: 0.95
    # --------------------------------------
    # --------------------------------------
    # Exploiting speed hierarchy
    # --------------------------------------
    # --------------------------------------
    measure_speeds: False
    drag: False
    oversample_power: 0.6
    oversample_thin: True

    max_tries: 100000 # need much larger than normal for rotation
    burn_in: 0
    # ---------------------------------------------------------------------
    # ---------------------------------------------------------------------
    # When no MPI used, number of fractions of the chain to compare
    # ---------------------------------------------------------------------
    # ---------------------------------------------------------------------
    Rminus1_single_split: 4

output: ./projects/lsst_y1/chains/EXAMPLE_MCMC73
